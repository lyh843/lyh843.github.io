<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>李云浩的个人主页</title>
    <style>
        .title {
            text-align: center;
        }

        a {
            margin-right: 10px;
        }

        .todo {
            display: inline-block;
            border: 3px solid black;
            padding: 10px;
        }

        body {
            background-image: linear-gradient(rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0.5)), url('background1.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            border: 1px solid black;
            padding: 8px;
            text-align: left;
        }

        .btn {
            cursor: pointer;
            margin-right: 5px;
        }
    </style>
</head>

<body>
    <h1 class="title">网页导览</h1>
    <h3 style="text-align: center;"><a href="https://github.com/lyh843" style="color: blue;" target="_blank">我的github</a>, <a href="http://4.189.252.43" style="color: blue;" target="_blank">我的博客</a></h3>
    <div class="todo">
        <h2 style="text-align: center;">待办事项</h2>
        <button onclick="addTask()">新增数据</button>
        <table border="1" id='taskTable'>
            <tr>
                <th>事项</th>
                <th>要求</th>
                <th>ddl</th>
                <th>提交方式</th>
                <th>操作</th>
            </tr>
            <!-- 动态添加任务行 -->
        </table>
    </div>

    <!-- 其他内容省略 -->

    <script>
        document.addEventListener('DOMContentLoaded', loadTasks);

        function loadTasks() {
            const tasks = JSON.parse(localStorage.getItem('tasks')) || [];
            tasks.forEach(task => addTaskRow(task));
        }

        function addTask() {
            const task = {
                item: '新任务',
                requirement: '请填写要求',
                ddl: '请填写截止日期',
                submission: '请填写提交方式'
            };
            addTaskRow(task);
            saveTasks();
        }

        function addTaskRow(task) {
            const table = document.getElementById('taskTable');
            const row = table.insertRow(-1);
            row.innerHTML = `
                <td contenteditable="true">${task.item}</td>
                <td contenteditable="true">${task.requirement}</td>
                <td contenteditable="true">${task.ddl}</td>
                <td contenteditable="true">${task.submission}</td>
                <td><button class="btn" onclick="deleteTask(this)">删除</button></td>
            `;
            row.cells.forEach(cell => {
                cell.addEventListener('input', () => saveTasks());
            });
        }

        function deleteTask(btn) {
            const row = btn.parentNode.parentNode;
            row.parentNode.removeChild(row);
            saveTasks();
        }

        function saveTasks() {
            const tasks = [];
            document.querySelectorAll('#taskTable tr').forEach((row, index) => {
                if (index === 0) return; // 跳过表头
                const cells = row.cells;
                tasks.push({
                    item: cells[0].textContent,
                    requirement: cells[1].textContent,
                    ddl: cells[2].textContent,
                    submission: cells[3].textContent
                });
            });
            localStorage.setItem('tasks', JSON.stringify(tasks));
        }
    </script>
</body>

</html>
